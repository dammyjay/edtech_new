<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="icon" type="image/x-icon" href="/logo.png" />
</head>
<body>
        <!-- Header -->
    <header class="header">
      <div class="logo-title">
        <% info = info || {}; %> <% if (info.logo_url) { %>
        <img src="<%= info.logo_url %>" alt="Logo" />
        <% } %>
        <p><%= info?.company_name || 'Jaykirch Tech Hub' %></p>
      </div>
      <!-- <button class="nav-toggle" onclick="toggleNav()">☰</button> -->
       <button id="nav-toggle-btn" class="nav-toggle" onclick="toggleNav()" aria-expanded="false" aria-controls="main-nav">☰</button>
      <nav id="main-nav">
        <div class="dropdown">
          <button class="dropbtn" onclick="toggleDropdown('schoolsMenu')">
              Dashoboard ▾
            </button>
            <div class="dropdown-content" id="schoolsMenu">
              <a class="active" href="<%= role === 'admin' ? '/admin/dashboard' : '/instructor/dashboard' %>">
                Dashboard
              </a>
              <a href="/admin/analytics">Analytics</a>
              <a href="/admin/feedback">Feedbacks</a>
            </div>
        </div>
        
        
        <% if (role === 'admin') { %>
          <div class="dropdown">
            <button class="dropbtn" onclick="toggleDropdown('studentsMenu')">
              Students ▾
            </button>
            <div class="dropdown-content" id="studentsMenu">
              <a href="/admin/students">All Students</a>
              <a href="/admin/students/progress">Progress & Performance</a>
              <a href="/admin/students/enrollments">Enrollments</a>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropbtn" onclick="toggleDropdown('schoolsMenu')">
              Schools ▾
            </button>
            <div class="dropdown-content" id="schoolsMenu">
              <a href="/admin/schools">All Schools</a>
              <a href="/admin/quotes">Quotes</a>
              <a href="/admin/school-courses">Assign Courses</a>
            </div>
          </div>
        <% } %>


        <a href="/admin/pathways">Pathways</a>
        <a href="/admin/courses">Courses</a>
        <% if (role === 'instructor') { %>
          <a href="/instructor/chats">Chats</a>
        <% } %>



        <% if (role === 'admin') { %>
          <div class="dropdown">
            <button class="dropbtn" onclick="toggleDropdown('galleryMenu')">
              Gallery ▾
            </button>
            <div class="dropdown-content" id="galleryMenu">
              <a href="/admin/gallery">Gallery</a>
              <!-- <a href="/admin/gallery/categories">Categories</a> -->
              <!-- <a href="/admin/demo-videos">Demo</a> -->
            </div>
          </div>

          <div class="dropdown">
            <button
              class="dropbtn"
              onclick="toggleDropdown('ministryMenu')"
            >
              company ▾
            </button>
            <div class="dropdown-content" id="ministryMenu">
              <a href="/admin/company">Company Details</a>
              <a href="/admin/about">About Us</a>
              <a href="/admin/faqs">FAQ</a>
              <a href="/admin/testimonies">Testimonies</a>
              <!-- <a href="/admin/devotionals">Devotionals</a> -->
              <a href="/admin/benefits">Benefits</a>
              <a href="/admin/events">Events</a>
            </div>
          </div>
        <% } %>

        <a href="/profile">Profile</a>
        <a href="/admin/logout" class="logout-button">Logout</a>
      </nav>
    </header>

    <script>
      function toggleNav() {
        var nav = document.getElementById("main-nav");
        nav.classList.toggle("open");
      }

    </script>

    <script>
  // Keep toggleNav globally so existing inline onclicks still work
  window.toggleNav = function toggleNav() {
    const nav = document.getElementById('main-nav');
    const btn = document.getElementById('nav-toggle-btn');
    if (!nav || !btn) return;
    nav.classList.toggle('open');
    btn.setAttribute('aria-expanded', nav.classList.contains('open'));
  };

  // Close nav when clicking outside (robust)
  document.addEventListener('click', function (event) {
    const nav = document.getElementById('main-nav');
    const btn = document.getElementById('nav-toggle-btn');
    if (!nav || !btn) return;

    // if nav is closed, nothing to do
    if (!nav.classList.contains('open')) return;

    // if click occurred inside nav or on the toggle button — ignore
    if (nav.contains(event.target) || btn.contains(event.target)) return;

    // otherwise close nav
    nav.classList.remove('open');
    btn.setAttribute('aria-expanded', 'false');
  }, true); // use capture to make this more robust

  // Optional: close nav with Escape key
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      const nav = document.getElementById('main-nav');
      const btn = document.getElementById('nav-toggle-btn');
      if (nav && nav.classList.contains('open')) {
        nav.classList.remove('open');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      }
    }
  });
</script>
</body>
</html>